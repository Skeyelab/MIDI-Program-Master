<html>
<head>
	<script src="https://cdn.jsdelivr.net/npm/webmidi"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
	<script type="text/javascript">
//var settings = {channel: 1, values:{ 12bankselectcoarse:0, bankselectfine:0, pc:0}};

// Enable WebMidi.js
	WebMidi.enable(function(err) {
		if (err) {
		console.log("WebMidi could not be enabled.", err);
		}
		createListeners();
		
	});
  
	function createListeners() {
		WebMidi.inputs.forEach(input => {
	
			// Listen to control change message on all channels
				input.addListener("controlchange", "all", function(e) {
					switch (e.controller.name) {
					case "bankselectcoarse":
						
						console.log(`Updating MSB for ch: ${e.channel} to ${e.value}`);
						$(`#bankselectcoarse_${e.channel}`).text(e.value);
						break;
					case "bankselectfine":
						
						console.log(`Updating LSB for ch: ${e.channel} to ${e.value}`);
						$(`#bankselectfine_${e.channel}`).text(e.value);
						break;
					default:
						console.log("Received 'controlchange' message.", e);
					}
				});
		
				input.addListener("programchange", "all", function(e) {
					$(`#pc_${e.channel}`).text(e.value);
					console.log(`Updating PC for ch: ${e.channel} to ${e.value}`);
				});
			});
	}

	</script>

	<h1>Program Change Monitor</h1>
	<p>This should monitor program change data for all available MIDI inputs.  Please report bugs here: <a href="https://github.com/Skeyelab/MIDI-Program-Master/issues">https://github.com/Skeyelab/MIDI-Program-Master/issues</a></p>
	<div class="divTable">
		<div class="divTableBody">
			<div class="divTableRow">
				<div class="divTableCell">&nbsp;</div>
				<div class="divTableCell">&nbsp;1</div>
				<div class="divTableCell">&nbsp;2</div>
				<div class="divTableCell">&nbsp;3</div>
				<div class="divTableCell">&nbsp;4</div>
				<div class="divTableCell">&nbsp;5</div>
				<div class="divTableCell">&nbsp;6</div>
				<div class="divTableCell">&nbsp;7</div>
				<div class="divTableCell">&nbsp;8</div>
				<div class="divTableCell">&nbsp;9</div>
				<div class="divTableCell">&nbsp;10</div>
				<div class="divTableCell">&nbsp;11</div>
				<div class="divTableCell">&nbsp;12</div>
				<div class="divTableCell">&nbsp;13</div>
				<div class="divTableCell">&nbsp;14</div>
				<div class="divTableCell">&nbsp;15</div>
				<div class="divTableCell">&nbsp;16</div>
			</div>
			<div class="divTableRow">
				<div class="divTableCell">&nbsp;MSB</div>
				<div class="divTableCell" id="bankselectcoarse_1">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_2">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_3">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_4">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_5">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_6">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_7">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_8">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_9">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_10">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_11">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_12">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_13">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_14">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_15">&nbsp;</div>
				<div class="divTableCell" id="bankselectcoarse_16">&nbsp;</div>
			</div>
			<div class="divTableRow">
				<div class="divTableCell">&nbsp;LSB</div>
				<div class="divTableCell" id="bankselectfine_1">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_2">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_3">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_4">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_5">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_6">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_7">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_8">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_9">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_10">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_11">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_12">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_13">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_14">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_15">&nbsp;</div>
				<div class="divTableCell" id="bankselectfine_16">&nbsp;</div>
			</div>
			<div class="divTableRow">
				<div class="divTableCell">&nbsp;PC</div>
				<div class="divTableCell" id="pc_1">&nbsp;</div>
				<div class="divTableCell" id="pc_2">&nbsp;</div>
				<div class="divTableCell" id="pc_3">&nbsp;</div>
				<div class="divTableCell" id="pc_4">&nbsp;</div>
				<div class="divTableCell" id="pc_5">&nbsp;</div>
				<div class="divTableCell" id="pc_6">&nbsp;</div>
				<div class="divTableCell" id="pc_7">&nbsp;</div>
				<div class="divTableCell" id="pc_8">&nbsp;</div>
				<div class="divTableCell" id="pc_9">&nbsp;</div>
				<div class="divTableCell" id="pc_10">&nbsp;</div>
				<div class="divTableCell" id="pc_11">&nbsp;</div>
				<div class="divTableCell" id="pc_12">&nbsp;</div>
				<div class="divTableCell" id="pc_13">&nbsp;</div>
				<div class="divTableCell" id="pc_14">&nbsp;</div>
				<div class="divTableCell" id="pc_15">&nbsp;</div>
				<div class="divTableCell" id="pc_16">&nbsp;</div>
			</div>
		</div>
	</div>
<!-- DivTable.com -->
<!-- DivTable.com -->


</html>